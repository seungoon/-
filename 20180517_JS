<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
	<!-- メイン画面 -->
	<div th:fragment="main">
		<div id="Gt_Maint-div-detail">

			<th:block th:unless="${form == null}">
				<input type="hidden" name="categoryid" th:value="${form.categoryid}" />
				<input type="hidden" name="categoryname" th:value="${form.categoryname}" />

				<!-- カテゴリ名 -->
				<h2 class="common-style-1" style="margin-top: -1px;">[[${form.categoryname}]]</h2>

				<div id="Gt_Doc-div-Doc-list">
					<div th:fragment="Gt_Doc-list">
						<div th:unless="${#lists.isEmpty(form.docList)}">
					           <div th:replace ="fragments/search::paginationbarDocList"></div>
					    </div>
						<!-- 資料一覧画面 -->
						<table id = "Gt_Doc-listtable"  style="display: block;" >
							<tr>
								<th width="50" align="center">[[#{list_no}]]</th>
								<th width="150" align="center">[[#{doc_no}]]</th>
								<th width="320" align="center">[[#{doc_name}]]</th>
								<th width="50" align="center">Rev</th>
								<th width="100" align="center">[[#{doc_approve}]]</th>
							</tr>

							<th:block th:if="${#lists.isEmpty(form.docList)}">
								<tr>
									<td colspan="4" align="center" style="border:0">[[#{message_data_not_found}]]</td>
								</tr>
							</th:block>

							<th:block th:unless="${#lists.isEmpty(form.docList)}">
								<tr th:each="doc, stat:${form.docList}">
									<td align="center" style="word-break: break-all;">[[${stat.count}]]</td>
									<td align="center" style="word-break: break-all;"><a th:href="'javascript:GtDocViewFile(\'' + ${doc.docno} + '\',\'' + ${doc.rev} +  '\',\'' + ${doc.fileurl} + '\',\'' + ${doc.linkshiteikbn} + '\',\'' + ${doc.manualfiletype} + '\' ,\'1\' );'" th:text="${doc.docno}"></a></td>
									<td align="center" style="word-break: break-all;">[[${doc.docname}]]</td>
									<td align="center" style="word-break: break-all;">[[${doc.rev}]]</td>
									<td align="center" style="word-break: break-all;">[[${doc.approvedate}]]</td>
								</tr>
							</th:block>

							<tr height=90>
							</tr>
						</table>
					</div>
				</div>
			</th:block>
		</div>

	<!-- JS共通関数定義 -->
	<script type="text/javascript">
  $(function() {
      $('#Gt_Doc-listtable').Scrollable({
        ScrollHeight : 245
      });
    });

	// ページング処理
	function GetDocPageList(pagenumber) {
		// データ検索呼出
		GetGtDocPaging(pagenumber);
	}

	// 公開中のドキュメントを取得するAjax処理
	function GetGtDocPaging(pagenumber) {

		// グルグル画像を表示
		showLoadingImage();
		// 条件を指定
		var search = {};
		search["categoryid"] =$( "input[name='categoryid']" ).val();
		search["categoryname"] = $( "input[name='categoryname']" ).val();
		search["pagenumber"] = pagenumber;

		var Div_dataList = $("#Gt_Doc-div-Doc-list");
		Div_dataList.empty();

		$.ajax({
			type : "POST",
			contentType : "application/json",
			cache : false,
			url : "[[@{/Doc/GetDocList/}]]",
			data : JSON.stringify(search),
			dataType : 'html',
			timeout : [[${@environment.getProperty('ajax.timeout')}]],
			success : function(data) {
				Div_dataList.html(data);
			},
			error : function(XMLHttpRequest, textStatus, errorThrown) {
				ajaxDisplayError(XMLHttpRequest, textStatus, errorThrown);
			},
			complete : function(e) {
				// グルグル画像を消す
				hideLoadingImage();
			}
		});
	}


	</script>

	</div>

</body>
</html>
